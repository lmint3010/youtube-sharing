(window.webpackJsonpwebsite=window.webpackJsonpwebsite||[]).push([[0],{37:function(e,n,t){e.exports=t(80)},42:function(e,n,t){},44:function(e,n,t){},80:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(8),i=t.n(o),l=(t(42),t(4)),u=t(6),c=(t(43),t(44),a.a.createContext()),d=(c.Consumer,function(e){var n=Object(r.useState)({auth:{status:!1}}),t=Object(l.a)(n,1)[0];return a.a.createElement(c.Provider,{value:t},e.children)}),s=t(2),p=t(3),f=t(7),g=t.n(f),m=t(10),v=t(11),b=t.n(v),h="https://mighty-island-16282.herokuapp.com/graphql",x=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.variables,a=void 0===t?{}:t,o=Object(r.useState)({data:null,loading:!0}),i=Object(l.a)(o,2),u=i[0],c=i[1],d=function(){var n=Object(m.a)(g.a.mark((function n(){var t;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.post(h,JSON.stringify({query:e,variables:a}),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:localStorage.getItem("utubvideotoken")||""}});case 2:t=n.sent,c({data:t.data,loading:!1});case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();u.loading&&!u.data&&d();var s=function(){return c({data:null,loading:!0})},p=u.data,f=u.loading;return{data:p,loading:f,refetch:s}},w=function(e){return[function(){var n=Object(m.a)(g.a.mark((function n(t){var r,a,o;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.variables,a=t.upload,n.next=3,b.a.post(h,JSON.stringify({query:e,variables:r}),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:localStorage.getItem("utubvideotoken")||""}});case 3:o=n.sent,a(o.data);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()]},O=t(14);function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var E=function(e,n,t){var a=Object(r.useState)(e),o=Object(l.a)(a,2),i=o[0],u=o[1],c=Object(r.useState)(!0),d=Object(l.a)(c,2),s=d[0],p=d[1],f=function(e,n){return n.required&&""===e?n.requiredWarning||"This field is required!":n.regex?n.regex.exec(e)?"":n.regexWarning||"Invalid value":""};Object(r.useEffect)((function(){var e=0!==Object.keys(i).filter((function(e){return!(!n[e].required||""!==i[e].value)||""!==i[e].error})).length;p(e)}),[i,n]);return{state:i,handleChange:function(e){var t=e.target,r=t.value,a=t.name;u(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(t,!0).forEach((function(n){Object(O.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},i,Object(O.a)({},a,{value:r,error:f(r,n[a])})))},handleSubmit:function(e){e.preventDefault();var n=Object.keys(i).reduce((function(e,n){return e[n]=i[n].value,e}),{});t(n)},disable:s}},y={getUser:"\n            query GetUser {\n                getUser {\n                    success\n                    error\n                    user {\n                        email\n                    }\n                }\n            }\n        ",getAllVideo:"\n            query GetAllVideo {\n                getAllVideo {\n                    success\n                    allVideo {\n                        _id\n                        email\n                        videoId\n                        title\n                        description\n                    }\n                }\n            }\n        "},k={login:"\n            mutation UserLogin($email: String!, $password: String!) {\n                login(user: {email: $email, password: $password}) {\n                    success\n                    token\n                    error\n                }\n            }   \n        ",addUser:"\n            mutation AddUser($email: String!, $password: String!) {\n                addUser(user: { email: $email, password: $password }) {\n                    success\n                    error\n                    user {\n                        email\n                    }\n                }\n            }\n        ",addVideo:"\n            mutation AddVideo($email: String!, $videoId: String!, $title: String!, $description: String) {\n                addVideo(video: { email: $email, videoId: $videoId, title: $title, description: $description }) {\n                    success\n                    error\n                    video {\n                        email\n                        videoId\n                        title\n                        description\n                    }\n                }\n            }\n        ",deleteVideo:"\n            mutation DeleteVideo($_id: String!) {\n                deleteVideo(video: {_id: $_id}) {\n                    success\n                    error\n                }\n            }\n        "};function S(){var e=Object(s.a)(["\n    position: absolute;\n    top: 104%;\n    font-size: 12px;\n    color: tomato;\n"]);return S=function(){return e},e}function C(){var e=Object(s.a)(["\n    border: none;\n    background: dodgerblue;\n    color: white;\n    font-size: 13px;\n    cursor: pointer;\n    margin: 0 2px;\n\n    &:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n    }\n"]);return C=function(){return e},e}function V(){var e=Object(s.a)(["\n    font-size: 13px;\n    padding: 4px;\n"]);return V=function(){return e},e}function z(){var e=Object(s.a)(["\n    font-size: 12px;\n    height: 16px;\n    outline: none;\n    padding: 4px;\n    border: 1px solid rgba(100, 100, 100, 0.12);\n"]);return z=function(){return e},e}function $(){var e=Object(s.a)(["\n    display: flex;\n    flex-direction: column;\n    position: relative;\n"]);return $=function(){return e},e}function I(){var e=Object(s.a)(["\n    display: flex;\n    position: fixed;\n    justify-content: flex-end;\n    top: 0;\n    left: 0;\n    right: 0;\n    padding: 12px;\n    background: white;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);\n"]);return I=function(){return e},e}var U=p.a.div(I()),A=p.a.div($()),q=p.a.input(z()),P=p.a.div(V()),D=p.a.button(C()),M=p.a.div(S()),_=function(e){var n=e.toggleModal,t=e.userQueried,r=E({email:{value:"",error:""},password:{value:"",error:""}},{email:{required:!0,regex:/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/g,regexWarning:"Invalid email address"},password:{required:!0}},(function(){})),o=r.state,i=r.handleChange,c=r.disable,d=w(k.login),s=Object(l.a)(d,1)[0],p=w(k.addUser),f=Object(l.a)(p,1)[0];return t.data.data.getUser.success?a.a.createElement(a.a.Fragment,null,a.a.createElement(U,null,a.a.createElement(P,null,"Welcome"," ",a.a.createElement("b",null,t.data.data.getUser.user.email)),a.a.createElement(D,{onClick:n(!0)},"Share a video"),a.a.createElement(D,{onClick:function(){localStorage.removeItem("utubvideotoken"),t.refetch()}},"Log out"))):a.a.createElement(a.a.Fragment,null,a.a.createElement(U,null,a.a.createElement(A,null,a.a.createElement(q,{type:"text",name:"email",placeholder:"email",value:o.email.value,onChange:i}),a.a.createElement(M,null,o.email.error)),a.a.createElement(A,null,a.a.createElement(q,{type:"password",name:"password",placeholder:"password",value:o.password.value,onChange:i}),a.a.createElement(M,null,o.password.error)),a.a.createElement(D,{onClick:function(){localStorage.removeItem("utubvideotoken"),s({variables:{email:o.email.value,password:o.password.value},upload:function(e){var n=e.data.login;n.success?(localStorage.setItem("utubvideotoken",n.token),t.refetch()):Object(u.a)(n.error)}})},disabled:c},"Login"),a.a.createElement(D,{onClick:function(){f({variables:{email:o.email.value,password:o.password.value},upload:function(e){e.data.addUser.success&&Object(u.a)("Account created successfully!"),Object(u.a)(e.data.addUser.error)}})},disabled:c},"Register")))},L=t(32);function W(){var e=Object(s.a)(["\n    font-size: 12px;\n    color: tomato;\n    font-style: italic;\n"]);return W=function(){return e},e}function F(){var e=Object(s.a)(["\n    font-size: 15px;\n    padding: 4px;\n    background: dodgerblue;\n    color: white;\n    border: none;\n    border-radius: 2px;\n    margin-top: 6px;\n    cursor: pointer;\n\n    &:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n    }\n"]);return F=function(){return e},e}function J(){var e=Object(s.a)(["\n    font-size: 14px;\n    padding: 4px;\n    margin: 2px;\n    border: 1px solid rgba(100, 100, 100, 0.4);\n    border-radius: 2px;\n"]);return J=function(){return e},e}function N(){var e=Object(s.a)(["\n    font-size: 14px;\n    padding: 4px;\n    margin: 2px;\n    border: 1px solid rgba(100, 100, 100, 0.4);\n    border-radius: 2px;\n"]);return N=function(){return e},e}function Q(){var e=Object(s.a)(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n"]);return Q=function(){return e},e}function Z(){var e=Object(s.a)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.4);\n"]);return Z=function(){return e},e}function T(){var e=Object(s.a)(["\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    padding: 1rem;\n    border-radius: 8px;\n    background: white;\n    z-index: 100;\n    width: 500px;\n"]);return T=function(){return e},e}var B=p.a.div(T()),G=p.a.div(Z()),R=p.a.form(Q()),Y=p.a.input(N()),H=p.a.textarea(J()),K=p.a.button(F()),X=p.a.div(W()),ee=function(e){var n=e.toggleModal,t=e.email,r=e.refetchVideoList,o=w(k.addVideo),i=Object(l.a)(o,1)[0],u=E({url:{value:"",error:""},title:{value:"",error:""},description:{value:"",error:""}},{url:{required:!0,regex:/youtube\.com\/watch\?v=.+/g,regexWarning:"Please enter valid youtube url!"},title:{required:!0},description:{required:!1}},(function(e){var a=e.url,o=e.title,l=e.description,u=function(e){var n=/watch\?v=.+/g.exec(e);return n?n[0].split("=")[1]:""}(a);i({variables:{email:t,videoId:u,title:o,description:l},upload:function(e){e.data.addVideo.success&&(r(),n(!1)())}})})),c=u.state,d=u.handleChange,s=u.handleSubmit,p=u.disable;return a.a.createElement(a.a.Fragment,null,a.a.createElement(B,null,a.a.createElement(R,{onSubmit:s},a.a.createElement("h4",null,"Share new video as ",t),a.a.createElement(Y,{type:"text",name:"url",placeholder:"https://www.youtube.com/watch?v=ZeJg...",value:c.url.value,onChange:d}),a.a.createElement(X,null,c.url.error),a.a.createElement(Y,{type:"text",name:"title",placeholder:"Video title",value:c.title.value,onChange:d}),a.a.createElement(X,null,c.title.error),a.a.createElement(H,{type:"text",name:"description",placeholder:"Video description",value:c.description.value,onChange:d}),a.a.createElement(K,{type:"submit",disabled:p},"Share video"))),a.a.createElement(G,{onClick:n(!1)}))};function ne(){var e=Object(s.a)(["\n    display: flex;\n    justify-content: flex-end;\n"]);return ne=function(){return e},e}function te(){var e=Object(s.a)(["\n    font-size: 14px;\n    background: rgba(240, 240, 240, 1);\n    padding: 6px 12px;\n    border-radius: 4px;\n    margin: 6px;\n    border: none;\n\n    &.agree {\n        background: dodgerblue;\n        color: white;\n    }\n"]);return te=function(){return e},e}function re(){var e=Object(s.a)(["\n    margin: 0;\n    padding: 1rem 10px;\n    font-size: 13px;\n    color: gray;\n"]);return re=function(){return e},e}function ae(){var e=Object(s.a)(["\n    font-size: 24px;\n    font-weight: bold;\n    padding: 12px 0;\n    text-align: center;\n    margin: 0;\n    border-bottom: 1px solid rgba(100, 100, 100, 0.2);\n"]);return ae=function(){return e},e}function oe(){var e=Object(s.a)(["\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0, 0, 0, 0.5);\n"]);return oe=function(){return e},e}function ie(){var e=Object(s.a)(["\n    width: 400px;\n    padding: 1rem;\n    background: white;\n    border-radius: 1rem;\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 100;\n"]);return ie=function(){return e},e}var le=p.a.div(ie()),ue=p.a.div(oe()),ce=p.a.h4(ae()),de=p.a.p(re()),se=p.a.button(te()),pe=p.a.div(ne()),fe=function(e){var n=e.title,t=e.agreeMessage,r=e.onClose,o=e.onConfirm,i=e.children;return a.a.createElement(a.a.Fragment,null,a.a.createElement(le,null,a.a.createElement(ce,null,n),a.a.createElement(de,null,i),a.a.createElement(pe,null,a.a.createElement(se,{className:"agree",onClick:o},t),a.a.createElement(se,{onClick:r},"Cancle"))),a.a.createElement(ue,{onClick:r}))};function ge(){var e=Object(s.a)(["\n    color: dodgerblue;\n    font-size: 14px;\n    padding: 12px 0 4px 0;\n"]);return ge=function(){return e},e}function me(){var e=Object(s.a)(["\n    font-size: 13px;\n    color: rgba(100, 100, 100, 1);\n    flex-grow: 1;\n    overflow-y: scroll;\n"]);return me=function(){return e},e}function ve(){var e=Object(s.a)(["\n    display: flex;\n    flex-direction: column;\n    order: 2;\n    padding: 0 1rem;\n    height: 200px;\n    flex-grow: 1;\n"]);return ve=function(){return e},e}function be(){var e=Object(s.a)(["\n    position: absolute;\n    top: 0;\n    right: 0;\n    border: none;\n    background: tomato;\n    color: white;\n    padding: 6px;\n    transform: translate(20%, -20%);\n    cursor: pointer;\n    border-radius: 2px;\n"]);return be=function(){return e},e}function he(){var e=Object(s.a)(["\n    display: flex;\n    background: white;\n    border-radius: 6px;\n    padding: 12px;\n    position: relative;\n    box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.106);\n\n    &:not(:first-child) {\n        margin-top: 1rem;\n    }\n"]);return he=function(){return e},e}function xe(){var e=Object(s.a)(["\n    width: 50%;\n"]);return xe=function(){return e},e}function we(){var e=Object(s.a)(["\n    display: flex;\n    justify-content: center;\n    width: 100vw;\n    padding: 4rem 0 0 0;\n"]);return we=function(){return e},e}var Oe=p.a.div(we()),je=p.a.div(xe()),Ee=p.a.div(he()),ye=p.a.button(be()),ke=p.a.div(ve()),Se=p.a.div(me()),Ce=p.a.div(ge()),Ve=function(e){var n=e.userQueried,t=e.modal,o=e.toggleModal,i={height:"100%",width:"auto",playerVars:{autoplay:0}},c=x(y.getAllVideo),d=c.data,s=c.loading,p=c.refetch,f=Object(r.useState)({status:!1,data:null}),g=Object(l.a)(f,2),m=g[0],v=g[1],b=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){v({status:e,data:n})}};if(s)return a.a.createElement("div",null,"Loading videos...");var h,O=d.data.getAllVideo.allVideo,j=w(k.deleteVideo),E=Object(l.a)(j,1)[0];return a.a.createElement(a.a.Fragment,null,a.a.createElement(Oe,null,a.a.createElement(je,null,O.length>0?O.map((function(e,t){return a.a.createElement(Ee,{key:t},a.a.createElement(L.a,{videoId:e.videoId,opts:i}),a.a.createElement(ke,null,a.a.createElement("h3",{style:{margin:"0 0 6px 0"}},e.title),a.a.createElement(Se,null,e.description),a.a.createElement(Ce,null,"Shared by ",e.email)),n.data.data.getUser.success&&e.email===n.data.data.getUser.user.email&&a.a.createElement(ye,{onClick:b(!0,e._id)},"Delete"))})):a.a.createElement("div",null,"No videos here..."))),t&&a.a.createElement(ee,{toggleModal:o,email:n.data.data.getUser.user.email,refetchVideoList:p}),m.status&&a.a.createElement(fe,{title:"Delete video",agreeMessage:"Delete",onClose:b(!1),onConfirm:(h=m.data,function(){E({variables:{_id:h},upload:function(e){if(e.data.deleteVideo.success)return b(!1,null)(),Object(u.a)("Video has been deleted!"),void p();Object(u.a)("Can't delete video...")}})})},"You really want to delete this video?"))};u.a.configure({autoClose:2e3});var ze=function(){var e=Object(r.useState)(!1),n=Object(l.a)(e,2),t=n[0],o=n[1],i=function(e){return function(){return o(e)}},u=x(y.getUser);return u.loading?a.a.createElement("div",null,"Loading..."):a.a.createElement(d,null,a.a.createElement("div",null,a.a.createElement(_,{toggleModal:i,userQueried:u}),a.a.createElement(Ve,{modal:t,toggleModal:i,userQueried:u})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(ze,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.b6e7005e.chunk.js.map